
`books`项目的后端部分，`Python`版，使用`docker`运行`php`容器和`mysql`容器提供接口。

## 使用

首先是构建镜像：
```bash
docker build -t bookshop .
```

运行数据库容器与 php 容器：
```bash
./start.sh
```

开启名为`books`的`php`容器和名为`books_db`的`mysql`容器，再初始化数据表
```bash
docker exec -i books_db mysql -uroot -p123 bookshop < setup.sql
```

## 数据库表

### 读者信息表

该表字段包含读者编号、读者姓名、读者身份证号、读者联系方式、读者地址、读者等级、读者添加时间，如图3.1所示。

![表3.1 读者信息表](http://oyy3cbpm3.bkt.clouddn.com/15184452355824.jpg)

### 图书信息表

该表字段包含图书编号、图书名称、图书ISBN码、图书价格、图书简介、图书封面地址、图书状态、添加时间，如表3.2所示。

![表3.2图书信息表](http://oyy3cbpm3.bkt.clouddn.com/15184452968281.jpg)

### 借阅记录表

该表在进行图书借阅时将生成记录，记录中写入借阅读者编号、所借图书编号、借阅时间，并自动生成借阅编号。在还书时，对该表的还书时间字段进行更新，写入当前时间，如图3.3所示。

![3.3借阅记录表](http://oyy3cbpm3.bkt.clouddn.com/15184453438344.jpg)

### 订单记录表

用户提交订单后将生成记录，写入购书读者编号、购买图书编号列表、留言、下单时间，并自动生成编号。管理员在后台对该订单进行确认或取消操作时，对订单状态字段进行更新，如表3.4所示。

![3.4订单记录表](http://oyy3cbpm3.bkt.clouddn.com/15184465946142.jpg)

### 购物车记录表

用户将图书加入到购物车时，首先根据用户编号结合当前时间生成唯一记录码，用以识别不同用户的购物车记录，同时将图书编号、图书折后价格写入。如表3.5所示。

![3.5购物车记录表](http://oyy3cbpm3.bkt.clouddn.com/15184466472209.jpg)

### 图书评论表

读者登录后在图书详情页进行评论时将生成记录，将图书ISBN码、留言内容，读者编号，留言时间写入，同时生成评论编号，如表3.6所示。

![3.6图书评论表](http://oyy3cbpm3.bkt.clouddn.com/15184468987893.jpg)

### 管理员信息表

记录可登录后台管理员账户密码、权限。

![3.7管理员信息表](http://oyy3cbpm3.bkt.clouddn.com/15184469499412.jpg)
